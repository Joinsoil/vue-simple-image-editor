(function(t){function e(e){for(var o,s,a=e[0],h=e[1],c=e[2],d=0,u=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&u.push(n[s][0]),n[s]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);l&&l(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],o=!0,a=1;a<i.length;a++){var h=i[a];0!==n[h]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},n={app:0},r=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-simple-image-editor/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=h;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("input",{attrs:{type:"file",accept:".jpeg"},on:{change:t.onChangeImageFile}}),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFile}},[t._v("Save Image File")]),i("br"),i("br"),i("div",[t._v("Resize & Crop Mode")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFileInMutliMode}},[t._v("Save Image File (Multi)")]),i("div",[i("simple-image-editor",{ref:"multiCanvas",staticStyle:{border:"1px solid red"},attrs:{width:800,height:600,imageSrc:t.imageSrc,imageObj:t.imageObj,cropWidth:200,cropHeight:200,resizeHandlerStyle:{strokeColor:"#000000"}},on:{changeImage:t.onChangeImage}})],1),i("br"),i("div",[t._v("Resize & Crop Mode (Fix)")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFileInMutliModeWithFixedCrop}},[t._v("Save Image File (Multi)")]),i("div",[i("simple-image-editor",{ref:"multiCanvasWithFixedCrop",staticStyle:{border:"1px solid red"},attrs:{width:800,height:600,imageSrc:t.imageSrc,imageObj:t.imageObj,cropWidth:200,cropHeight:200,isFixedCrop:""},on:{changeImage:t.onChangeImage}})],1),i("br"),i("div",[t._v("Resize Mode")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFileInResizeMode}},[t._v("Save Image File (Resize)")]),i("div",[i("simple-image-editor",{ref:"resizeCanvas",staticStyle:{border:"1px solid red"},attrs:{width:800,height:600,imageSrc:t.imageSrc,imageObj:t.imageObj,isResizeMode:""},on:{changeImage:t.onChangeImage}})],1),i("br"),i("div",[t._v("Crop Mode")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFileInCropMode}},[t._v("Save Image File (Crop)")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveCrop}},[t._v("Save Crop")]),i("div",[i("simple-image-editor",{ref:"cropCanvas",staticStyle:{border:"1px solid red"},attrs:{width:800,height:600,imageSrc:t.imageSrc,imageObj:t.imageObj,isCropMode:""},on:{changeImage:t.onChangeImage}})],1),i("br"),i("div",[t._v("Crop Mode (Fix)")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveImageFileInCropModeWithFixedCrop}},[t._v("Save Image File (Crop)")]),i("button",{attrs:{type:"button"},on:{click:t.onClickSaveCropWithFixedCrop}},[t._v("Save Crop")]),i("div",[i("simple-image-editor",{ref:"cropCanvasWithFixedCrop",staticStyle:{border:"1px solid red"},attrs:{width:800,height:600,imageSrc:t.imageSrc,imageObj:t.imageObj,isCropMode:"",cropWidth:200,cropHeight:200,isFixedCrop:""},on:{changeImage:t.onChangeImage}})],1),i("br"),i("div",[t._v("Origin Image")]),i("div",{ref:"container"})])},r=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isMultiMode?[t.isCrop?[i("div",{staticStyle:{position:"absolute",right:"0",top:"0"}},[i("button",{style:t.cropSaveButtonStyle,attrs:{type:"button"},on:{click:t.onClickCrop}},[t._v(t._s(t.cropSaveButtonText))]),i("button",{staticStyle:{"margin-left":"10px"},style:t.cropCancelButtonStyle,attrs:{type:"button"},on:{click:function(e){t.isCrop=!1}}},[t._v(t._s(t.cropCancelButtonText))])])]:i("button",{staticStyle:{position:"absolute",right:"0",top:"0"},style:t.cropButtonStyle,attrs:{type:"button"},on:{click:function(e){t.isCrop=!0}}},[t._v(t._s(t.cropButtonText))])]:t._e()],2)}),a=[],h=(i("a9e3"),i("96cf"),i("1da1")),c=(i("4160"),i("159b"),i("9ab4")),l=function(){function t(t){this.canvas=t,this.ctx=t.getContext("2d"),this.ctx&&(this.ctx.imageSmoothingEnabled=!0),this.width=t.width,this.height=t.height,this.bounds=null}return t.prototype.clearRect=function(){this.ctx&&this.ctx.clearRect(0,0,this.width,this.height)},t.prototype.setBounds=function(t){this.bounds=t?Object(c["a"])({},t):null},t}(),d=l,u=(i("fb6a"),Math.cos),p=Math.sin;function g(t,e){return{a:1,c:0,e:t,b:0,d:1,f:e}}function f(t,e){return{a:t.a*e.a+t.c*e.b,c:t.a*e.c+t.c*e.d,e:t.a*e.e+t.c*e.f+t.e,b:t.b*e.a+t.d*e.b,d:t.b*e.c+t.d*e.d,f:t.b*e.e+t.d*e.f+t.f}}function m(t){switch(t.length){case 0:throw new Error("No Matrix");case 1:return t[0];case 2:return f(t[0],t[1]);default:var e=t[0],i=t[1],o=t.slice(2);return m(Object(c["d"])([f(e,i)],o))}}function v(t,e,i){var o=u(t),n=p(t),r={a:o,c:-n,e:0,b:n,d:o,f:0};return m([g(e,i),r,g(-e,-i)])}function b(t,e){return{x:t.a*e.x+t.c*e.y+t.e,y:t.b*e.x+t.d*e.y+t.f}}function y(t,e){var i=t.x,o=t.y,n=e.left,r=e.top,s=e.right,a=e.bottom,h=e.angle;return b(v(h*Math.PI/180,(s-n)/2,(a-r)/2),{x:i,y:o})}var w,C,x=function(t){function e(e){var i=t.call(this,e)||this;return i.image=null,i}return Object(c["b"])(e,t),e.prototype.draw=function(){if(this.image&&this.bounds&&this.ctx){var t=this.bounds,e=t.left,i=t.top,o=t.right,n=t.bottom,r=t.angle,s=e+(o-e)/2,a=i+(n-i)/2;this.clearRect(),this.ctx.save(),this.ctx.translate(s,a),this.ctx.rotate(r*Math.PI/180),this.ctx.translate(-s,-a),this.ctx.drawImage(this.image,e,i,o-e,n-i),this.ctx.restore()}},e.prototype.crop=function(t){var e=this,i=t.left,o=t.top,n=t.right,r=t.bottom;return new Promise((function(t,s){if(e.image){var a=document.createElement("canvas"),h=a.getContext("2d");if(h){var c=n-i,l=r-o;a.width=c,a.height=l,h.drawImage(e.canvas,i,o,c,l,0,0,c,l),e.image.onload=function(){return t()},e.image.onerror=s,e.image.src=a.toDataURL()}else s(new Error("No Canvas Context"))}else s(new Error("No Image"))}))},e.prototype.createResizeCanvas=function(){if(!this.bounds||!this.image)return null;var t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return null;var i=this.bounds,o=i.left,n=i.top,r=i.right,s=i.bottom,a=i.angle,h=r-o,c=s-n,l=h/2,d=c/2,u=y({x:0,y:0},this.bounds),p=y({x:0,y:c},this.bounds),g=y({x:h,y:0},this.bounds),f=y({x:h,y:c},this.bounds),m=Math.min(u.x,p.x,g.x,f.x),v=Math.min(u.y,p.y,g.y,f.y),b=Math.max(u.x,p.x,g.x,f.x),w=Math.max(u.y,p.y,g.y,f.y);return t.width=b-m,t.height=w-v,e.translate(Math.abs(m)+l,Math.abs(v)+d),e.rotate(a*Math.PI/180),e.translate(-l,-d),e.drawImage(this.image,0,0,h,c),t},e.prototype.resize=function(){var t=this;return new Promise((function(e,i){if(t.image){var o=t.createResizeCanvas();o?(t.image.onload=function(){return e()},t.image.onerror=i,t.image.src=o.toDataURL()):i(new Error("No Canvas"))}else i(new Error("No Image"))}))},e.prototype.saveFile=function(t){void 0===t&&(t="imageFile");var e=this.createResizeCanvas();if(e)if(e.toBlob)e.toBlob((function(e){if(e){var i=document.createElement("a"),o=URL.createObjectURL(e);i.download=t+".jpeg",i.setAttribute("style","display:none;"),i.setAttribute("download",t+".jpeg"),i.setAttribute("href",o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}}),"image/jpeg");else{var i=e;i.msToBlob&&window.navigator.msSaveBlob(i.msToBlob("image/jpeg"),"canvas.png")}},e}(d),O=x;i("cb29");function S(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function I(t,e){return{x:t,y:e}}function T(t,e){var i=t.left,o=t.top,n=t.right,r=t.bottom,s=e.left,a=e.top,h=e.right,c=e.bottom,l=e.angle,d=m([v(l*Math.PI/180,s+(h-s)/2,a+(c-a)/2),v(-l*Math.PI/180,i+(n-i)/2,o+(r-o)/2)]),u=b(d,{x:i,y:o}),p=u.x,g=u.y,f=b(d,{x:n,y:r}),y=f.x,w=f.y;return{left:p,top:g,right:y,bottom:w,angle:l}}function M(t,e){var i=t.x,o=t.y,n=e.left,r=e.top,s=e.right,a=e.bottom,h=e.angle;return b(v(-h*Math.PI/180,n+(s-n)/2,r+(a-r)/2),{x:i,y:o})}(function(t){t[t["LEFT"]=1]="LEFT",t[t["TOP"]=2]="TOP",t[t["TOP_LEFT"]=3]="TOP_LEFT",t[t["BOTTOM"]=4]="BOTTOM",t[t["BOTTOM_LEFT"]=5]="BOTTOM_LEFT",t[t["RIGHT"]=8]="RIGHT",t[t["TOP_RIGHT"]=10]="TOP_RIGHT",t[t["BOTTOM_RIGHT"]=12]="BOTTOM_RIGHT",t[t["ROTATION"]=98]="ROTATION",t[t["MOVE"]=99]="MOVE"})(w||(w={})),function(t){t[t["NONE"]=0]="NONE",t[t["RESIZE"]=1]="RESIZE",t[t["MOVE"]=2]="MOVE",t[t["ROTATION"]=3]="ROTATION"}(C||(C={}));var E="#FF0000",F=2,R=7,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mode=null,e.strokeColor=E,e.strokeWidth=F,e.handlerFillColor=E,e.handlerSize=R,e}return Object(c["b"])(e,t),e.prototype.setStyle=function(t){var e=t.strokeColor,i=void 0===e?E:e,o=t.strokeWidth,n=void 0===o?F:o,r=t.handlerFillColor,s=void 0===r?E:r,a=t.handlerSize,h=void 0===a?R:a;this.strokeColor=i,this.strokeWidth=n,this.handlerFillColor=s,this.handlerSize=h},e.prototype.draw=function(){if(this.bounds&&this.ctx){var t=this.bounds,e=t.left,i=t.top,o=t.right,n=t.bottom,r=t.angle,s=e+(o-e)/2,a=i+(n-i)/2;this.ctx.save(),this.ctx.translate(s,a),this.ctx.rotate(r*Math.PI/180),this.ctx.translate(-s,-a),this.drawRect(this.bounds),this.drawHandlerList(),this.drawSub(),this.ctx.restore()}},e.prototype.drawRect=function(t){if(this.ctx){var e=t.left,i=t.top,o=t.right,n=t.bottom;this.ctx.strokeStyle=this.strokeColor,this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeRect(e,i,o-e,n-i)}},e.prototype.drawHandler=function(t,e){if(this.ctx){var i=2*this.handlerSize;this.ctx.fillRect(t-this.handlerSize,e-this.handlerSize,i,i)}},e.prototype.drawRotation=function(){if(this.bounds&&this.ctx){var t=this.bounds,e=t.left,i=t.top,o=t.right,n=e+(o-e)/2,r=i-50;this.ctx.beginPath(),this.ctx.moveTo(n,i),this.ctx.lineTo(n,r),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(n,r,this.handlerSize,0,2*Math.PI),this.ctx.fill()}},e.prototype.drawHandlerList=function(){if(this.bounds&&this.ctx){var t=this.bounds,e=t.left,i=t.top,o=t.right,n=t.bottom,r=e+(o-e)/2,s=i+(n-i)/2;this.ctx.fillStyle=this.handlerFillColor,this.drawHandler(e,i),this.drawHandler(o,i),this.drawHandler(e,n),this.drawHandler(o,n),this.drawHandler(r,i),this.drawHandler(r,n),this.drawHandler(e,s),this.drawHandler(o,s)}},e.prototype.drawSub=function(){this.drawRotation()},e.prototype.setMode=function(t){if(this.bounds){var e=this.bounds,i=e.left,o=e.top,n=e.right,r=e.bottom,s=i+(n-i)/2,a=o+(r-o)/2,h=M(t,this.bounds),c=h.x,l=h.y;S(h,I(i,o))<=this.handlerSize?this.mode=w.TOP_LEFT:S(h,I(n,o))<=this.handlerSize?this.mode=w.TOP_RIGHT:S(h,I(i,r))<=this.handlerSize?this.mode=w.BOTTOM_LEFT:S(h,I(n,r))<=this.handlerSize?this.mode=w.BOTTOM_RIGHT:S(h,I(s,o))<=this.handlerSize?this.mode=w.TOP:S(h,I(s,r))<=this.handlerSize?this.mode=w.BOTTOM:S(h,I(i,a))<=this.handlerSize?this.mode=w.LEFT:S(h,I(n,a))<=this.handlerSize?this.mode=w.RIGHT:S(h,I(s,o-50))<=this.handlerSize?this.mode=w.ROTATION:this.mode=c>i&&l>o&&c<n&&l<r?w.MOVE:null}},e.prototype.changeResizeBounds=function(t){if(this.bounds&&this.mode){var e=M(t,this.bounds),i=e.x,o=e.y,n=this.bounds,r=n.left,s=n.top,a=n.right,h=n.bottom,l=Object(c["a"])({},this.bounds);(this.mode&w.LEFT)===w.LEFT&&(i>a-this.handlerSize?l.left=a-this.handlerSize:l.left=i),(this.mode&w.TOP)===w.TOP&&(o>h-this.handlerSize?l.top=h-this.handlerSize:l.top=o),(this.mode&w.RIGHT)===w.RIGHT&&(i<r+this.handlerSize?l.right=r+this.handlerSize:l.right=i),(this.mode&w.BOTTOM)===w.BOTTOM&&(o<s+this.handlerSize?l.bottom=s+this.handlerSize:l.bottom=o),this.setBounds(T(l,this.bounds))}},e.prototype.changeMoveBounds=function(t,e){var i=t.x,o=t.y,n=e.x,r=e.y;if(this.bounds){var s=this.bounds,a=s.left,h=s.top,c=s.right,l=s.bottom,d=s.angle,u=a+(i-n),p=h+(o-r);this.setBounds({left:u,top:p,right:u+c-a,bottom:p+l-h,angle:d})}},e.prototype.changeAngle=function(t){var e=t.x,i=t.y;if(this.bounds){var o=this.bounds,n=o.left,r=o.top,s=o.right,a=o.bottom,h=n+(s-n)/2,c=r+(a-r)/2;this.setBounds({left:n,top:r,right:s,bottom:a,angle:e>h?90+180*Math.atan2(i-c,e-h)/Math.PI:270+180*Math.atan2(c-i,h-e)/Math.PI})}},e}(d),z=k,B="#C0C0C0",j=.3,L=function(t){function e(e,i){var o=t.call(this,e)||this;return o.boundaryBounds=i,o.isFixedCrop=!1,o.fillColor=B,o.fillAlpha=j,o}return Object(c["b"])(e,t),e.prototype.setStyle=function(e){var i=e.fillColor,o=void 0===i?B:i,n=e.fillAlpha,r=void 0===n?j:n,s=Object(c["c"])(e,["fillColor","fillAlpha"]);this.fillColor=o,this.fillAlpha=r,t.prototype.setStyle.call(this,s)},e.prototype.draw=function(){this.bounds&&(this.clearRect(),t.prototype.draw.call(this))},e.prototype.drawRect=function(t){if(this.ctx){var e=t.left,i=t.top,o=t.right,n=t.bottom,r=o-e,s=n-i;this.ctx.strokeStyle=this.strokeColor,this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeRect(e,i,r,s),this.ctx.globalAlpha=this.fillAlpha,this.ctx.fillStyle=this.fillColor,this.ctx.fillRect(e,i,r,s),this.ctx.globalAlpha=1}},e.prototype.drawSub=function(){this.drawLineList()},e.prototype.drawHandlerList=function(){this.isFixedCrop||t.prototype.drawHandlerList.call(this)},e.prototype.drawLineList=function(){if(this.bounds&&this.ctx){var t=this.bounds,e=t.left,i=t.top,o=t.right,n=t.bottom,r=o-e,s=n-i,a=e+1*r/3;this.ctx.setLineDash([5,5]),this.drawLine(a,i,a,n),a=e+2*r/3,this.drawLine(a,i,a,n);var h=i+1*s/3;this.drawLine(e,h,o,h),h=i+2*s/3,this.drawLine(e,h,o,h)}},e.prototype.drawLine=function(t,e,i,o){this.ctx&&(this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,o),this.ctx.stroke())},e.prototype.setMode=function(e){if(this.bounds)if(this.isFixedCrop){var i=e.x,o=e.y,n=this.bounds,r=n.left,s=n.top,a=n.right,h=n.bottom;this.mode=i>r&&o>s&&i<a&&o<h?w.MOVE:null}else t.prototype.setMode.call(this,e),this.mode===w.ROTATION&&(this.mode=null)},e.prototype.changeResizeBounds=function(e){if(this.bounds&&this.mode){t.prototype.changeResizeBounds.call(this,e);var i=e.x,o=e.y,n=this.boundaryBounds,r=n.left,s=n.top,a=n.right,h=n.bottom,l=Object(c["a"])({},this.bounds);(this.mode&w.LEFT)===w.LEFT&&i<r&&(l.left=r),(this.mode&w.TOP)===w.TOP&&o<s&&(l.top=s),(this.mode&w.RIGHT)===w.RIGHT&&i>a&&(l.right=a),(this.mode&w.BOTTOM)===w.BOTTOM&&o>h&&(l.bottom=h),this.setBounds(l)}},e.prototype.changeMoveBounds=function(t,e){var i=t.x,o=t.y,n=e.x,r=e.y;if(this.bounds){var s=this.bounds,a=s.left,h=s.top,c=s.right,l=s.bottom,d=this.boundaryBounds,u=d.left,p=d.top,g=d.right,f=d.bottom,m=c-a,v=l-h,b=a+(i-n),y=h+(o-r);a<u&&(b=u),y<p&&(y=p),b+m>g&&(b=g-m),y+v>f&&(y=f-v),this.setBounds({left:b,top:y,right:b+m,bottom:y+v,angle:0})}},e}(z),P=L;function H(t,e,i){var o=document.createElement("canvas");return o.width=t,o.height=e,o.setAttribute("style",i||""),o}function V(t){return new Promise((function(e,i){var o=new Image;o.onload=function(){return e(o)},o.onerror=i,o.src=t}))}var _=function(){function t(t,e){var i=this,o=e.width,n=void 0===o?500:o,r=e.height,s=void 0===r?500:r,a=e.cropWidth,h=void 0===a?0:a,l=e.cropHeight,d=void 0===l?0:l;this.el=t,this.editMode=C.NONE,this.prevPos=null,this.isCrop=!1,this.windowEventList=[{key:"mousemove",event:function(t){return i.onMove(t,i.getMousePos(t))}},{key:"mouseup",event:function(t){return i.onUp(t)}},{key:"touchmove",event:function(t){return i.onMove(t,i.getTouchPos(t))}},{key:"touchend",event:function(t){return i.onUp(t)}}],this.eventList=Object(c["d"])(this.windowEventList,[{key:"mousedown",event:function(t){return i.onDown(t,i.getMousePos(t))}},{key:"touchstart",event:function(t){return i.onDown(t,i.getTouchPos(t))}}]),this.el=t,this.width=n,this.height=s,this.cropWidth=h,this.cropHeight=d,this.el.setAttribute("style",this.el.getAttribute("style")+"position:relative;display:inline-block;"),this.viewCanvas=H(n,s),this.cropCanvas=H(n,s,"position:absolute;left:0;top:0;"),this.fragment=document.createDocumentFragment(),this.fragment.appendChild(this.viewCanvas),this.fragment.appendChild(this.cropCanvas),this.imageView=new O(this.viewCanvas),this.resizeView=new z(this.viewCanvas),this.cropView=new P(this.cropCanvas,{left:0,top:0,right:n,bottom:s,angle:0}),this.addEventListener()}return t.prototype.addEventListener=function(){var t=this;this.eventList.forEach((function(e){var i=e.key,o=e.event;t.viewCanvas.addEventListener(i,o),t.cropCanvas.addEventListener(i,o)}))},t.prototype.removeEventListener=function(){var t=this;this.eventList.forEach((function(e){var i=e.key,o=e.event;t.viewCanvas.removeEventListener(i,o),t.cropCanvas.removeEventListener(i,o)}))},t.prototype.init=function(){this.el.contains(this.viewCanvas)||(this.el.hasChildNodes()?this.el.insertBefore(this.fragment,this.el.childNodes[0]):this.el.appendChild(this.fragment))},t.prototype.setImage=function(t){if(this.imageView.image=t,t){var e=t.width,i=t.height,o=(this.width-e)/2,n=(this.height-i)/2,r={left:o,top:n,right:o+e,bottom:n+i,angle:0},s=void 0;if(this.cropWidth&&this.cropHeight&&this.cropWidth<e&&this.cropHeight<i){var a=(this.width-this.cropWidth)/2,h=(this.height-this.cropHeight)/2;s={left:a,top:h,right:a+this.cropWidth,bottom:h+this.cropHeight,angle:0}}else s=r;this.imageView.setBounds(r),this.resizeView.setBounds(r),this.cropView.setBounds(s),this.render()}else this.imageView.setBounds(null),this.resizeView.setBounds(null),this.cropView.setBounds(null),this.imageView.clearRect(),this.resizeView.clearRect(),this.cropView.clearRect()},t.prototype.setImagePath=function(t){var e=this;V(t).then((function(t){return e.setImage(t)}))},t.prototype.setCrop=function(t){this.isCrop=t,this.cropCanvas.style.visibility=t?"visible":"hidden",this.render()},t.prototype.setFixedCrop=function(t){this.cropView.isFixedCrop=t},t.prototype.getTouchPos=function(t){var e,i,o=t.touches;o&&o.length?(e=o[0].pageX,i=o[0].pageY):(e=0,i=0);var n=this.el,r=n.offsetLeft,s=n.offsetTop;return{x:e-r,y:i-s}},t.prototype.getMousePos=function(t){var e=t,i=e.pageX,o=e.pageY,n=this.el,r=n.offsetLeft,s=n.offsetTop;return{x:i-r,y:o-s}},t.prototype.getTrackerView=function(){return this.isCrop?this.cropView:this.resizeView},t.prototype.getImage=function(){return this.imageView.image},t.prototype.resize=function(){var t=this;return new Promise((function(e,i){return t.imageView.resize().then((function(){return e()})).catch((function(){return i(new Error("Fail Resize"))}))}))},t.prototype.saveImageFile=function(t){this.imageView.saveFile(t)},t.prototype.crop=function(){var t=this,e=this.cropView.bounds;if(e)return new Promise((function(i,o){t.imageView.crop(e).then((function(){t.imageView.setBounds(e),t.resizeView.setBounds(e),i()})).catch((function(){return o(new Error("Fail Crop"))}))}))},t.prototype.render=function(){this.imageView.draw(),this.getTrackerView().draw()},t.prototype.onDown=function(t,e){var i=this.getTrackerView();i.setMode(e);var o=i.mode;null==o?this.editMode=C.NONE:(this.windowEventList.forEach((function(t){var e=t.key,i=t.event;return window.addEventListener(e,i)})),o===w.MOVE?this.editMode=C.MOVE:o===w.ROTATION?this.editMode=C.ROTATION:this.editMode=C.RESIZE,this.prevPos=e,t.preventDefault())},t.prototype.onMove=function(t,e){if(this.editMode!==C.NONE){var i=this.getTrackerView();this.editMode===C.RESIZE?i.changeResizeBounds(e):this.editMode===C.MOVE?this.prevPos&&i.changeMoveBounds(e,this.prevPos):this.editMode===C.ROTATION&&i.changeAngle(e),this.isCrop||this.imageView.setBounds(this.resizeView.bounds),this.render(),this.prevPos=e,t.preventDefault()}},t.prototype.onUp=function(t){this.editMode!==C.NONE&&(this.resizeView.mode=null,this.cropView.mode=null,this.editMode=C.NONE,this.prevPos=null,t.preventDefault()),this.windowEventList.forEach((function(t){var e=t.key,i=t.event;return window.removeEventListener(e,i)}))},t.prototype.setStyle=function(t,e){this.resizeView.setStyle(t),this.cropView.setStyle(e)},t}(),N=_,W={props:{width:{type:Number,default:500,required:!0},height:{type:Number,default:500,required:!0},imageSrc:{type:String,default:null},imageObj:{type:Image,default:null},isResizeMode:{type:Boolean,default:!1},isCropMode:{type:Boolean,defaul:!1},isFixedCrop:{type:Boolean,defaul:!1},resizeHandlerStyle:{type:Object,default:function(){return{}}},cropHandlerStyle:{type:Object,default:function(){return{}}},cropButtonText:{type:String,default:"Crop"},cropButtonStyle:{type:Object,default:null},cropSaveButtonText:{type:String,default:"Save Crop"},cropSaveButtonStyle:{type:Object,default:null},cropCancelButtonText:{type:String,default:"Cancel Crop"},cropCancelButtonStyle:{type:Object,default:null},cropWidth:{type:Number,default:0},cropHeight:{type:Number,default:0}},data:function(){return{isCrop:null,imageEditor:null}},computed:{isMultiMode:function(){return!(this.isResizeMode^this.isCropMode)}},watch:{imageSrc:function(t){this.imageEditor&&this.imageEditor.setImagePath(t)},imageObj:function(t){this.imageEditor&&this.imageEditor.setImagePath(t?t.src:null)},isCropMode:function(t){this.isCrop=t},isFixedCrop:function(t){this.imageEditor.setFixedCrop(t)},isCrop:function(t){this.imageEditor.setCrop(t)}},mounted:function(){this.imageEditor||(this.imageEditor=new N(this.$el,{width:this.width,height:this.height,cropWidth:this.cropWidth,cropHeight:this.cropHeight})),this.imageEditor.init(),this.imageEditor.setImagePath(this.imageSrc||this.imageObj&&this.imageObj.src),this.imageEditor.setFixedCrop(this.isFixedCrop),this.imageEditor.setStyle(this.resizeHandlerStyle,this.cropHandlerStyle),this.isCrop=this.isCropMode},methods:{onClickCrop:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.imageEditor.resize();case 2:return e.next=4,t.imageEditor.crop();case 4:t.isCrop=!1;case 5:case"end":return e.stop()}}),e)})))()},saveImageFile:function(t){this.imageEditor.saveImageFile(t)},resize:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.imageEditor.resize();case 2:t.$emit("changeImage",t.imageEditor.getImage());case 3:case"end":return e.stop()}}),e)})))()},crop:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.imageEditor.crop();case 2:t.imageEditor.render(),t.$emit("changeImage",t.imageEditor.getImage());case 4:case"end":return e.stop()}}),e)})))()}}},A=W,$=i("2877"),G=Object($["a"])(A,s,a,!1,null,null,null),U=G.exports,D="img/a.jpg",Z={name:"app",components:{SimpleImageEditor:U},data:function(){return{imageSrc:D,imageObj:null,image:null}},methods:{onChangeImageFile:function(t){var e=this;this.imageSrc=null,this.imageObj=null;var i=t.target.files;if(i.length>0){var o=i[0],n=new FileReader;n.onload=function(t){var i=new Image;i.onload=function(){e.imageObj=i;while(e.$refs.container.hasChildNodes())e.$refs.container.removeChild(e.$refs.container.firstChild);e.$refs.container.appendChild(i)},i.src=t.target.result},n.readAsDataURL(o)}else this.imageSrc=D},onClickSaveImageFile:function(){if(this.image){var t=this.image,e=t.width,i=t.height,o=document.createElement("canvas");o.width=e,o.height=i,o.getContext("2d").drawImage(this.image,0,0,e,i),o.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="imageFile.jpeg",document.body.appendChild(e),e.click(),document.body.removeChild(e)}),"image/jpeg")}},onClickSaveImageFileInMutliMode:function(){this.$refs.multiCanvas.saveImageFile()},onClickSaveImageFileInMutliModeWithFixedCrop:function(){this.$refs.multiCanvasWithFixedCrop.saveImageFile()},onClickSaveImageFileInResizeMode:function(){this.$refs.resizeCanvas.saveImageFile()},onClickSaveImageFileInCropMode:function(){this.$refs.cropCanvas.saveImageFile()},onClickSaveCrop:function(){this.$refs.cropCanvas.crop()},onClickSaveImageFileInCropModeWithFixedCrop:function(){this.$refs.cropCanvasWithFixedCrop.saveImageFile()},onClickSaveCropWithFixedCrop:function(){this.$refs.cropCanvasWithFixedCrop.crop()},onChangeImage:function(t){this.image=t}}},q=Z,J=Object($["a"])(q,n,r,!1,null,null,null),X=J.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(X)}}).$mount("#app")}});
//# sourceMappingURL=app.9aebd314.js.map